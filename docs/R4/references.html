<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<head>
    <title>资源引用 - HL7 FHIR 中国</title>

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="author" content="http://hl7.org/fhir"/>

  <link rel="stylesheet" href="fhir.css"/>
  <link rel="Prev" href="http://hl7.org/fhir/references.html"/>

    <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="./dist/css/bootstrap.css"/>
  <link rel="stylesheet" href="./assets/css/bootstrap-fhir.css"/>

    <!-- Project extras -->
  <link rel="stylesheet" href="./assets/css/project.css"/>
  <link rel="stylesheet" href="./assets/css/pygments-manni.css"/>
	<link rel="stylesheet" href="jquery-ui.css"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- [if lt IE 9]>
  <script src="./assets/js/html5shiv.js"></script>
  <script src="./assets/js/respond.min.js"></script>
  <![endif] -->

    <!-- Favicons -->
  <link sizes="144x144" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-144-precomposed.png"/>
  <link sizes="114x114" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-114-precomposed.png"/>
  <link sizes="72x72" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-72-precomposed.png"/>
  <link rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-57-precomposed.png"/>
  <link rel="shortcut icon" href="./assets/ico/favicon.png"/>

</head>
<body>
    <div id="segment-header" class="segment"></div>  <!-- /segment-header -->	


	<div id="segment-navbar" class="segment">  <!-- segment-navbar -->
		<div id="stripe"> </div>
		<div class="container">  <!-- container -->
   <!-- HEADER CONTENT -->
 	      		 	      		      		
			<nav class="navbar navbar-inverse">
				<div class="container">
					<button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
					</button>
					<a href="index.html" class="navbar-brand hidden">FHIR</a>
    <div class="nav-collapse collapse navbar-inverse-collapse"  id="nav-content"></div>  <!-- /.nav-collapse -->
				</div>  <!-- /.container -->
			</nav>  <!-- /.navbar -->
      		
  <!-- /HEADER CONTENT -->				
		</div>  <!-- /container -->
	</div>  <!-- /segment-navbar -->
	

	<div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
		<div class="container">  <!-- container -->	
			<ul class="breadcrumb">
        <li><img src="foundation.png"/><b>当前位置：</b><a href="foundation-module.html">基础</a></li>
        <li>资源引用</li>        <!-- references.html / page / -->

			</ul>	
		</div>  <!-- /container -->
	</div>  <!-- /segment-breadcrumb -->
	

	<div id="segment-content" class="segment">  <!-- segment-content -->
	<div class="container">  <!-- container -->
            <div class="row">
            	<div class="inner-wrapper">
  <!-- CONTENT CONTENT -->


<div class="col-12">

<ul class="nav nav-tabs"><li class="active"><a href="#">References</a></li><li><a href="references-definitions.html">Detailed Descriptions</a></li></ul>


<a name="Reference"></a>
<a name="reference"></a>
<a name="Resource"></a>
<a name="references"></a>
<a name="Identification"></a>
<h2 class="self-link-parent"><span class="sectioncount">2.3.0<a name="2.3.0"> </a></span> Resource References <a href="references.html#2.3.0" title="link to here" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h2>
<table class="colsn"><tr><td id="wg">工作组:<a href="http://www.hl7.org/Special/committees/fiwg/index.cfm" _target="blank">FHIR Infrastructure <img src="external.png" style="text-align: baseline"/></a></td><td id="fmm"><a href="versions.html#maturity">成熟度</a>: Normative</td><td id="ballot"><a href="versions.html#std-process">标准状态</a>:  <!-- !ns! --><a href="versions.html#std-process">Normative</a></td></tr></table>


<p>
Many of the defined elements in a resource are references to other resources. Using these
references, the resources combine to build a web of information about healthcare.
</p>
<p>
References are always defined and represented in one direction - from one resource (source) to another (target).
The corresponding reverse relationship from the target to the source exists in a logical sense, but is
not typically represented explicitly in the target resource. For external references, navigating these reverse relationships requires some
external infrastructure to track the relationship between resources (the <a href="http.html">REST API</a> provides one such
infrastructure by providing the ability to <a href="http.html#search">search</a> the reverse relationship by naming
search parameters for the references and by providing support for <a href="search.html#revinclude">reverse includes</a>).
</p>
<p>
Because resources are processed independently, relationships are not considered to be transitive.
For example, if a <a href="procedure.html">Procedure</a> resource references a <a href="patient.html">Patient</a> as its subject, and has a 
<a href="procedure.html">Procedure</a> resource as its reason, there is no automatic rule or implication that the condition 
has the same patient for its subject. Instead, the subject of the condition must be established 
directly in the Condition resource itself. Another way to state this is that the context of the 
subject is not "inherited", nor does it "conduct" along the relationship to condition.
The only exception to this is the case of contained resources (see below). Note that in
practice, the relationships need to describe a logical and coherent record, and in the
case of the Condition and Procedure described here, they would usually be required to have
the same patient for their subjects. Profiles and/or implementation guides may make rules 
about this (also see <a href="graphdefinition.html">GraphDefinition</a>).
</p>
<p>
This specification describes the use of references to other resources that have the same FHIR version as the source of the reference.
Expected behavior for references across FHIR versions is presently undefined.
</p>
<p>
References are made to resource based on their identity; there are <a href="resource.html#id">several different identities</a> to refer to.
</p>
<p>
Resources contain two types of references to other resources:
</p>
<ul>
 <li><b>Resource references</b> - general references between resources</li>
 <li><b>Canonical references</b> - references to resources by their canonical URL (see <a href="#canonical">below</a>)</li>
</ul>

<p>
For canonical references, see below. The general references are handled by the <code>Reference</code> type.
which contains at least one of a <code>reference</code> (literal reference),
an <code>identifier</code> (logical reference), and a <code>display</code> (text description of target).
In addition, it may contain a target <code>type</code>.
</p>

<div id="tabs-Reference">
 <ul>
  <li><a href="#tabs-Reference-struc">Structure</a></li>
  <li><a href="#tabs-Reference-uml">UML</a></li>
  <li><a href="#tabs-Reference-xml">XML</a></li>
  <li><a href="#tabs-Reference-json">JSON</a></li>
  <li><a href="#tabs-Reference-ttl">Turtle</a></li>
  <li><a href="#tabs-Reference-diff">R3 Diff</a></li>
  <li><a href="#tabs-Reference-all">All</a></li>
 </ul>
 <div id="tabs-Reference-struc">
  <div id="tbl">
   <p><b>Structure</b></p>
   <div id="tbl-inner">
    <table border="0" cellpadding="0" cellspacing="0" style="border: 0px #F0F0F0 solid; font-size: 11px; font-family: verdana; vertical-align: top;"><tr style="border: 1px #F0F0F0 solid; font-size: 11px; font-family: verdana; vertical-align: top;"><th style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="The logical name of the element">Name</a></th><th style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="Information about the use of the element">Flags</a></th><th style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="Minimum and Maximum # of times the the element can appear in the instance">Card.</a></th><th style="width: 100px" class="hierarchy"><a href="formats.html#table" title="Reference to the type of the element">Type</a></th><th style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="Additional information about the element">Description &amp; Constraints</a><span style="float: right"><a href="formats.html#table" title="Legend for this format"><img src="help16.png" alt="doco" style="background-color: inherit"/></a></span></th></tr><tr style="border: 0px #F0F0F0 solid; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck1.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_element.gif" alt="." style="background-color: white; background-color: inherit" title="Element" class="hierarchy"/> <a href="references-definitions.html#Reference" title="Reference : A reference from one resource to another.">Reference</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a style="padding-left: 3px; padding-right: 3px; color: black; background-color: white" href="elementdefinition-definitions.html#ElementDefinition.isSummary" title="This element is included in summaries">Σ</a><a style="padding-left: 3px; padding-right: 3px; color: black; background-color: white" href="conformance-rules.html#constraints" title="This element has or is affected by some invariants">I</a><a style="padding-left: 3px; padding-right: 3px; border: 1px grey solid; font-weight: bold; color: black; background-color: #e6ffe6" href="versions.html#std-process" title="Standards Status = Normative">N</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="element.html">Element</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">A reference from one resource to another<br/><span style="font-style: italic" title="ref-1">+ Rule: SHALL have a contained resource if a local reference is provided</span><br/>Elements defined in Ancestors: <a href="element.html#Element" title="Unique id for the element within a resource (for internal references). This may be any string value that does not contain spaces.">id</a>, <a href="element.html#Element" title="May be used to represent additional information that is not part of the basic definition of the element. To make the use of extensions safe and manageable, there is a strict set of governance  applied to the definition and use of extensions. Though any implementer can define an extension, there is a set of requirements that SHALL be met as part of the definition of the extension.">extension</a></td></tr>
<tr style="border: 0px #F0F0F0 solid; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck10.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="tbl_vjoin.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_primitive.png" alt="." style="background-color: white; background-color: inherit" title="Primitive Data Type" class="hierarchy"/> <a href="references-definitions.html#Reference.reference" title="Reference.reference : A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources.">reference</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a style="padding-left: 3px; padding-right: 3px; color: black; background-color: white" href="elementdefinition-definitions.html#ElementDefinition.isSummary" title="This element is included in summaries">Σ</a><a style="padding-left: 3px; padding-right: 3px; color: black; background-color: white" href="conformance-rules.html#constraints" title="This element has or is affected by some invariants">I</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">0..1</td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="datatypes.html#string">string</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">Literal reference, Relative, internal or absolute URL</td></tr>
<tr style="border: 0px #F0F0F0 solid; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck10.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="tbl_vjoin.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_primitive.png" alt="." style="background-color: white; background-color: inherit" title="Primitive Data Type" class="hierarchy"/> <a href="references-definitions.html#Reference.type" title="Reference.type : The expected type of the target of the reference. If both Reference.type and Reference.reference are populated and Reference.reference is a FHIR URL, both SHALL be consistent.

The type is the Canonical URL of Resource Definition that is the type this reference refers to. References are URLs that are relative to http://hl7.org/fhir/StructureDefinition/ e.g. &quot;Patient&quot; is a reference to http://hl7.org/fhir/StructureDefinition/Patient. Absolute URLs are only allowed for logical models (and can only be used in references in logical models, not resources).">type</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a style="padding-left: 3px; padding-right: 3px; color: black; background-color: white" href="elementdefinition-definitions.html#ElementDefinition.isSummary" title="This element is included in summaries">Σ</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">0..1</td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="datatypes.html#uri">uri</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">Type the reference refers to (e.g. "Patient")<br/><a href="valueset-resource-types.html" title="Aa resource (or, for logical models, the URI of the logical model).">ResourceType</a> (<a href="terminologies.html#extensible" title="To be conformant, the concept in this element SHALL be from the specified value set if any of the codes within the value set can apply to the concept being communicated.  If the value set does not cover the concept (based on human review), alternate codings (or, data type allowing, text) may be included instead.">Extensible</a>)</td></tr>
<tr style="border: 0px #F0F0F0 solid; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck10.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="tbl_vjoin.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_datatype.gif" alt="." style="background-color: white; background-color: inherit" title="Data Type" class="hierarchy"/> <a href="references-definitions.html#Reference.identifier" title="Reference.identifier : An identifier for the target resource. This is used when there is no way to reference the other resource directly, either because the entity it represents is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location. There is no requirement that a Reference.identifier point to something that is actually exposed as a FHIR instance, but it SHALL point to a business concept that would be expected to be exposed as a FHIR instance, and that instance would need to be of a FHIR resource type allowed by the reference.">identifier</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a style="padding-left: 3px; padding-right: 3px; color: black; background-color: white" href="elementdefinition-definitions.html#ElementDefinition.isSummary" title="This element is included in summaries">Σ</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">0..1</td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="datatypes.html#Identifier">Identifier</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">Logical reference, when literal reference is not known</td></tr>
<tr style="border: 0px #F0F0F0 solid; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck00.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="tbl_vjoin_end.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_primitive.png" alt="." style="background-color: white; background-color: inherit" title="Primitive Data Type" class="hierarchy"/> <a href="references-definitions.html#Reference.display" title="Reference.display : Plain text narrative that identifies the resource in addition to the resource reference.">display</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a style="padding-left: 3px; padding-right: 3px; color: black; background-color: white" href="elementdefinition-definitions.html#ElementDefinition.isSummary" title="This element is included in summaries">Σ</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">0..1</td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="datatypes.html#string">string</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">Text alternative for the resource</td></tr>
<tr><td colspan="5" class="hierarchy"><br/><a href="formats.html#table" title="Legend for this format"><img src="help16.png" alt="doco" style="background-color: inherit"/> Documentation for this format</a></td></tr></table>
   </div>
  </div>
 </div>

 <div id="tabs-Reference-uml">
  <div id="uml">
   <p><b>UML Diagram</b> (<a href="formats.html#uml">Legend</a>)</p>
   <div id="uml-inner">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="489.6" id="n15" version="1.1" height="112.0">  <defs>
    <filter x="0" width="200%" y="0" id="shadow1" height="200%">
      <feOffset result="offOut" dx="3" in="SourceGraphic" dy="3"></feOffset>
      <feColorMatrix result="matrixOut" in="offOut" values="0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0" type="matrix"></feColorMatrix>
      <feGaussianBlur result="blurOut" stdDeviation="2" in="matrixOut"></feGaussianBlur>
      <feBlend mode="normal" in="SourceGraphic" in2="blurOut"></feBlend>
    </filter>
  </defs><g id="n16"><rect filter="url(#shadow1)" rx="4" ry="4" x="0.0" width="114.4" y="50.0" style="fill:#ecffec;stroke:black;stroke-width:1" id="n17" height="46.0"></rect><text x="57.2" y="70.0" id="n18" fill="black" class="diagram-class-title"><a id="n19" xlink:href="element.html#Element">Element</a></text><line y1="78.0" x1="0.0" y2="78.0" x2="114.4" style="stroke:dimgrey;stroke-width:1" id="n20"></line><text x="6.0" y="92.0" fill="black" class="diagram-class-detail"><a id="n21" xlink:href="extensibility.html"><title id="n22">Extensions - as described for all elements: additional information that is not part of the basic definition of the resource / type</title>extension</a> : <a id="n23" xlink:href="extensibility.html">Extension</a> 0..*</text></g><g id="n24"><rect filter="url(#shadow1)" rx="4" ry="4" x="140.0" width="149.60000000000002" y="0.0" style="fill:#ecffec;stroke:black;stroke-width:1" id="n25" height="92.0"></rect><line y1="28.0" x1="140.0" y2="28.0" x2="289.6" style="stroke:dimgrey;stroke-width:1" id="n26"></line><text x="214.8" y="20.0" id="n27" fill="black" class="diagram-class-title"><a id="n28" xlink:href="references.html#Reference">Reference</a></text><text x="146.0" y="42.0" id="n29" fill="black" class="diagram-class-detail"><a id="n30" xlink:href="references-definitions.html#Reference.reference"><title>A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources</title>reference</a> : <a id="n31" xlink:href="#string">string</a> [0..1]</text><text x="146.0" y="56.0" id="n35" fill="black" class="diagram-class-detail"><a id="n36" xlink:href="references-definitions.html#Reference.type"><title>The expected type of the target of the reference. If both Reference.type and Reference.reference are populated and Reference.reference is a FHIR URL, both SHALL be consistent.

The type is the Canonical URL of Resource Definition that is the type this reference refers to. References are URLs that are relative to http://hl7.org/fhir/StructureDefinition/ e.g. "Patient" is a reference to http://hl7.org/fhir/StructureDefinition/Patient. Absolute URLs are only allowed for logical models (and can only be used in references in logical models, not resources)</title>type</a> : <a id="n37" xlink:href="#uri">uri</a> [0..1] « <a id="n38" xlink:href="valueset-resource-types.html"><title id="n39">Aa resource (or, for logical models, the URI of the logical model). (Strength=Extensible)</title>ResourceType</a>+ »</text><text x="146.0" y="70.0" id="n45" fill="black" class="diagram-class-detail"><a id="n46" xlink:href="references-definitions.html#Reference.identifier"><title>An identifier for the target resource. This is used when there is no way to reference the other resource directly, either because the entity it represents is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location. There is no requirement that a Reference.identifier point to something that is actually exposed as a FHIR instance, but it SHALL point to a business concept that would be expected to be exposed as a FHIR instance, and that instance would need to be of a FHIR resource type allowed by the reference</title>identifier</a> : <a id="n47" xlink:href="#Identifier">Identifier</a> [0..1]</text><text x="146.0" y="84.0" id="n51" fill="black" class="diagram-class-detail"><a id="n52" xlink:href="references-definitions.html#Reference.display"><title>Plain text narrative that identifies the resource in addition to the resource reference</title>display</a> : <a id="n53" xlink:href="#string">string</a> [0..1]</text></g><line y1="63.20050761421319" x1="114.4" y2="58.81472081218273" x2="140.0" style="stroke:navy;stroke-width:1" id="n57"></line><polygon transform="rotate(-9.721524048481587 114.4 63.20050761421319)" style="fill:white;stroke:navy;stroke-width:1" id="n58" points="114.4,63.20050761421319 122.4,69.2005076142132 122.4,57.20050761421319 114.4,63.20050761421319"></polygon></svg>
   </div>
  </div>
 </div>

 <div id="tabs-Reference-xml">
  <div id="xml">
   <p><b>XML Template</b></p>
   <div id="xml-inner">
    <pre class="spec">
&lt;<a href="references-definitions.html#Reference" title="A reference from one resource to another." class="dict"><b>[name]</b></a> xmlns="http://hl7.org/fhir"&gt;
 &lt;!-- from Element: <a href="extensibility.html">extension</a> --&gt;
 &lt;<a href="references-definitions.html#Reference.reference" title="A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources." class="dict"><b>reference</b></a> value="[<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>]"/&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown" title="ref-1: SHALL have a contained resource if a local reference is provided"><b><img src="lock.png" alt="??"/> 0..1</b></span> <span style="color: navy"><a style="color: navy" href="terminologies.html#unbound">Literal reference, Relative, internal or absolute URL</a></span><span style="color: Gray"> --&gt;</span>
 &lt;<a href="references-definitions.html#Reference.type" title="The expected type of the target of the reference. If both Reference.type and Reference.reference are populated and Reference.reference is a FHIR URL, both SHALL be consistent.

The type is the Canonical URL of Resource Definition that is the type this reference refers to. References are URLs that are relative to http://hl7.org/fhir/StructureDefinition/ e.g. &quot;Patient&quot; is a reference to http://hl7.org/fhir/StructureDefinition/Patient. Absolute URLs are only allowed for logical models (and can only be used in references in logical models, not resources)." class="dict"><b>type</b></a> value="[<span style="color: darkgreen"><a href="datatypes.html#uri">uri</a></span>]"/&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>0..1</b></span> <span style="color: navy"><a style="color: navy" href="valueset-resource-types.html">Type the reference refers to (e.g. "Patient")</a></span><span style="color: Gray"> --&gt;</span>
 &lt;<a href="references-definitions.html#Reference.identifier" title="An identifier for the target resource. This is used when there is no way to reference the other resource directly, either because the entity it represents is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location. There is no requirement that a Reference.identifier point to something that is actually exposed as a FHIR instance, but it SHALL point to a business concept that would be expected to be exposed as a FHIR instance, and that instance would need to be of a FHIR resource type allowed by the reference." class="dict"><b>identifier</b></a>&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>0..1</b></span> <span style="color: darkgreen"><a href="datatypes.html#Identifier">Identifier</a></span> <span style="color: navy"><a style="color: navy" href="terminologies.html#unbound">Logical reference, when literal reference is not known</a></span><span style="color: Gray"> --&gt;</span>&lt;/identifier&gt;
 &lt;<a href="references-definitions.html#Reference.display" title="Plain text narrative that identifies the resource in addition to the resource reference." class="dict"><b>display</b></a> value="[<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>]"/&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>0..1</b></span> <span style="color: navy"><a style="color: navy" href="terminologies.html#unbound">Text alternative for the resource</a></span><span style="color: Gray"> --&gt;</span>
&lt;/[name]&gt;
</pre>


   </div>
  </div>
 </div>

 <div id="tabs-Reference-json">
  <div id="json">
   <p><b>JSON Template</b></p>
   <div id="json-inner">
    <pre class="spec">
{<span style="float: right"><a href="json.html" title="Documentation for this format"><img src="help.png" alt="doco"/></a></span>
  // from Element: <a href="extensibility.html">extension</a>
  "<a href="references-definitions.html#Reference.reference" title="A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources." class="dict">reference</a>" : "&lt;<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>&gt;", <span style="color: Gray">//</span> <span style="color: brown" title="ref-1: SHALL have a contained resource if a local reference is provided"><b>C?</b></span> <span style="color: navy; opacity: 0.8"><a style="color: navy; opacity: 0.8" href="terminologies.html#unbound">Literal reference, Relative, internal or absolute URL</a></span>
  "<a href="references-definitions.html#Reference.type" title="The expected type of the target of the reference. If both Reference.type and Reference.reference are populated and Reference.reference is a FHIR URL, both SHALL be consistent.

The type is the Canonical URL of Resource Definition that is the type this reference refers to. References are URLs that are relative to http://hl7.org/fhir/StructureDefinition/ e.g. &quot;Patient&quot; is a reference to http://hl7.org/fhir/StructureDefinition/Patient. Absolute URLs are only allowed for logical models (and can only be used in references in logical models, not resources)." class="dict">type</a>" : "&lt;<span style="color: darkgreen"><a href="datatypes.html#uri">uri</a></span>&gt;", <span style="color: Gray">//</span> <span style="color: navy; opacity: 0.8"><a style="color: navy; opacity: 0.8" href="valueset-resource-types.html">Type the reference refers to (e.g. "Patient")</a></span>
  "<a href="references-definitions.html#Reference.identifier" title="An identifier for the target resource. This is used when there is no way to reference the other resource directly, either because the entity it represents is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location. There is no requirement that a Reference.identifier point to something that is actually exposed as a FHIR instance, but it SHALL point to a business concept that would be expected to be exposed as a FHIR instance, and that instance would need to be of a FHIR resource type allowed by the reference." class="dict">identifier</a>" : { <span style="color: darkgreen"><a href="datatypes.html#Identifier">Identifier</a></span> }, <span style="color: Gray">//</span> <span style="color: navy; opacity: 0.8"><a style="color: navy; opacity: 0.8" href="terminologies.html#unbound">Logical reference, when literal reference is not known</a></span>
  "<a href="references-definitions.html#Reference.display" title="Plain text narrative that identifies the resource in addition to the resource reference." class="dict">display</a>" : "&lt;<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>&gt;" <span style="color: Gray">//</span> <span style="color: navy; opacity: 0.8"><a style="color: navy; opacity: 0.8" href="terminologies.html#unbound">Text alternative for the resource</a></span>
}
</pre>


   </div>
  </div>
 </div>

 <div id="tabs-Reference-ttl">
  <div id="ttl">
   <p><b>Turtle Template</b></p>
   <div id="ttl-inner">
    <pre class="spec">
@prefix fhir: &lt;http://hl7.org/fhir/&gt; .

[
 # from Element: <a href="extensibility.html">Element.extension</a>
  fhir:<a href="references-definitions.html#Reference.reference" title="A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources." class="dict">Reference.reference</a><a name="ttl-reference"> </a>[ <a href="datatypes.html#string">string</a> ]; # 0..1 <span style="color: navy">Literal reference, Relative, internal or absolute URL</span>
  fhir:<a href="references-definitions.html#Reference.type" title="The expected type of the target of the reference. If both Reference.type and Reference.reference are populated and Reference.reference is a FHIR URL, both SHALL be consistent.

The type is the Canonical URL of Resource Definition that is the type this reference refers to. References are URLs that are relative to http://hl7.org/fhir/StructureDefinition/ e.g. &quot;Patient&quot; is a reference to http://hl7.org/fhir/StructureDefinition/Patient. Absolute URLs are only allowed for logical models (and can only be used in references in logical models, not resources)." class="dict">Reference.type</a><a name="ttl-type"> </a>[ <a href="datatypes.html#uri">uri</a> ]; # 0..1 <span style="color: navy">Type the reference refers to (e.g. "Patient")</span>
  fhir:<a href="references-definitions.html#Reference.identifier" title="An identifier for the target resource. This is used when there is no way to reference the other resource directly, either because the entity it represents is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location. There is no requirement that a Reference.identifier point to something that is actually exposed as a FHIR instance, but it SHALL point to a business concept that would be expected to be exposed as a FHIR instance, and that instance would need to be of a FHIR resource type allowed by the reference." class="dict">Reference.identifier</a><a name="ttl-identifier"> </a>[ <a href="datatypes.html#Identifier">Identifier</a> ]; # 0..1 <span style="color: navy">Logical reference, when literal reference is not known</span>
  fhir:<a href="references-definitions.html#Reference.display" title="Plain text narrative that identifies the resource in addition to the resource reference." class="dict">Reference.display</a><a name="ttl-display"> </a>[ <a href="datatypes.html#string">string</a> ]; # 0..1 <span style="color: navy">Text alternative for the resource</span>
]
</pre>


   </div>
  </div>
 </div>

 <div id="tabs-Reference-diff">
  <div id="diff">
   <p><b>Changes since Release 3</b></p>
   <div id="diff-inner">
    <table class="grid">
  <tr class="diff-item">
    <td class="diff-left">
      <a href="references.html#Reference">Reference</a>
    </td>
    <td class="diff-right"></td>
  </tr>
  <tr class="diff-new">
    <td class="diff-left">Reference.type</td>
    <td class="diff-right">
      <ul>
        <li>Added Element</li>
      </ul>
    </td>
  </tr>
</table>

<p>See the <a href="diff.html">Full Difference</a> for further information</p>

   </div>
  </div>
 </div>

 <div id="tabs-Reference-all">
  <div id="tbla">
   <a name="tbl-Reference"> </a>
   <p><b>Structure</b></p>
   <div id="tbl-inner">
    <table border="0" cellpadding="0" cellspacing="0" style="border: 0px #F0F0F0 solid; font-size: 11px; font-family: verdana; vertical-align: top;"><tr style="border: 1px #F0F0F0 solid; font-size: 11px; font-family: verdana; vertical-align: top;"><th style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="The logical name of the element">Name</a></th><th style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="Information about the use of the element">Flags</a></th><th style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="Minimum and Maximum # of times the the element can appear in the instance">Card.</a></th><th style="width: 100px" class="hierarchy"><a href="formats.html#table" title="Reference to the type of the element">Type</a></th><th style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="Additional information about the element">Description &amp; Constraints</a><span style="float: right"><a href="formats.html#table" title="Legend for this format"><img src="help16.png" alt="doco" style="background-color: inherit"/></a></span></th></tr><tr style="border: 0px #F0F0F0 solid; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck1.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_element.gif" alt="." style="background-color: white; background-color: inherit" title="Element" class="hierarchy"/> <a href="references-definitions.html#Reference" title="Reference : A reference from one resource to another.">Reference</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a style="padding-left: 3px; padding-right: 3px; color: black; background-color: white" href="elementdefinition-definitions.html#ElementDefinition.isSummary" title="This element is included in summaries">Σ</a><a style="padding-left: 3px; padding-right: 3px; color: black; background-color: white" href="conformance-rules.html#constraints" title="This element has or is affected by some invariants">I</a><a style="padding-left: 3px; padding-right: 3px; border: 1px grey solid; font-weight: bold; color: black; background-color: #e6ffe6" href="versions.html#std-process" title="Standards Status = Normative">N</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="element.html">Element</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">A reference from one resource to another<br/><span style="font-style: italic" title="ref-1">+ Rule: SHALL have a contained resource if a local reference is provided</span><br/>Elements defined in Ancestors: <a href="element.html#Element" title="Unique id for the element within a resource (for internal references). This may be any string value that does not contain spaces.">id</a>, <a href="element.html#Element" title="May be used to represent additional information that is not part of the basic definition of the element. To make the use of extensions safe and manageable, there is a strict set of governance  applied to the definition and use of extensions. Though any implementer can define an extension, there is a set of requirements that SHALL be met as part of the definition of the extension.">extension</a></td></tr>
<tr style="border: 0px #F0F0F0 solid; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck10.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="tbl_vjoin.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_primitive.png" alt="." style="background-color: white; background-color: inherit" title="Primitive Data Type" class="hierarchy"/> <a href="references-definitions.html#Reference.reference" title="Reference.reference : A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources.">reference</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a style="padding-left: 3px; padding-right: 3px; color: black; background-color: white" href="elementdefinition-definitions.html#ElementDefinition.isSummary" title="This element is included in summaries">Σ</a><a style="padding-left: 3px; padding-right: 3px; color: black; background-color: white" href="conformance-rules.html#constraints" title="This element has or is affected by some invariants">I</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">0..1</td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="datatypes.html#string">string</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">Literal reference, Relative, internal or absolute URL</td></tr>
<tr style="border: 0px #F0F0F0 solid; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck10.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="tbl_vjoin.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_primitive.png" alt="." style="background-color: white; background-color: inherit" title="Primitive Data Type" class="hierarchy"/> <a href="references-definitions.html#Reference.type" title="Reference.type : The expected type of the target of the reference. If both Reference.type and Reference.reference are populated and Reference.reference is a FHIR URL, both SHALL be consistent.

The type is the Canonical URL of Resource Definition that is the type this reference refers to. References are URLs that are relative to http://hl7.org/fhir/StructureDefinition/ e.g. &quot;Patient&quot; is a reference to http://hl7.org/fhir/StructureDefinition/Patient. Absolute URLs are only allowed for logical models (and can only be used in references in logical models, not resources).">type</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a style="padding-left: 3px; padding-right: 3px; color: black; background-color: white" href="elementdefinition-definitions.html#ElementDefinition.isSummary" title="This element is included in summaries">Σ</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">0..1</td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="datatypes.html#uri">uri</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">Type the reference refers to (e.g. "Patient")<br/><a href="valueset-resource-types.html" title="Aa resource (or, for logical models, the URI of the logical model).">ResourceType</a> (<a href="terminologies.html#extensible" title="To be conformant, the concept in this element SHALL be from the specified value set if any of the codes within the value set can apply to the concept being communicated.  If the value set does not cover the concept (based on human review), alternate codings (or, data type allowing, text) may be included instead.">Extensible</a>)</td></tr>
<tr style="border: 0px #F0F0F0 solid; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck10.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="tbl_vjoin.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_datatype.gif" alt="." style="background-color: white; background-color: inherit" title="Data Type" class="hierarchy"/> <a href="references-definitions.html#Reference.identifier" title="Reference.identifier : An identifier for the target resource. This is used when there is no way to reference the other resource directly, either because the entity it represents is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location. There is no requirement that a Reference.identifier point to something that is actually exposed as a FHIR instance, but it SHALL point to a business concept that would be expected to be exposed as a FHIR instance, and that instance would need to be of a FHIR resource type allowed by the reference.">identifier</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a style="padding-left: 3px; padding-right: 3px; color: black; background-color: white" href="elementdefinition-definitions.html#ElementDefinition.isSummary" title="This element is included in summaries">Σ</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">0..1</td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="datatypes.html#Identifier">Identifier</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">Logical reference, when literal reference is not known</td></tr>
<tr style="border: 0px #F0F0F0 solid; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck00.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="tbl_vjoin_end.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_primitive.png" alt="." style="background-color: white; background-color: inherit" title="Primitive Data Type" class="hierarchy"/> <a href="references-definitions.html#Reference.display" title="Reference.display : Plain text narrative that identifies the resource in addition to the resource reference.">display</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a style="padding-left: 3px; padding-right: 3px; color: black; background-color: white" href="elementdefinition-definitions.html#ElementDefinition.isSummary" title="This element is included in summaries">Σ</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">0..1</td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy"><a href="datatypes.html#string">string</a></td><td style="vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px" class="hierarchy">Text alternative for the resource</td></tr>
<tr><td colspan="5" class="hierarchy"><br/><a href="formats.html#table" title="Legend for this format"><img src="help16.png" alt="doco" style="background-color: inherit"/> Documentation for this format</a></td></tr></table>
   </div>
  </div>

  <div id="umla">
   <a name="uml-Reference"> </a>
   <p><b>UML Diagram</b> (<a href="formats.html#uml">Legend</a>)</p>
   <div id="uml-inner">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="489.6" id="n15" version="1.1" height="112.0">  <defs>
    <filter x="0" width="200%" y="0" id="shadow1b" height="200%">
      <feOffset result="offOut" dx="3" in="SourceGraphic" dy="3"></feOffset>
      <feColorMatrix result="matrixOut" in="offOut" values="0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0" type="matrix"></feColorMatrix>
      <feGaussianBlur result="blurOut" stdDeviation="2" in="matrixOut"></feGaussianBlur>
      <feBlend mode="normal" in="SourceGraphic" in2="blurOut"></feBlend>
    </filter>
  </defs><g id="n16"><rect filter="url(#shadow1b)" rx="4" ry="4" x="0.0" width="114.4" y="50.0" style="fill:#ecffec;stroke:black;stroke-width:1" id="n17" height="46.0"></rect><text x="57.2" y="70.0" id="n18" fill="black" class="diagram-class-title"><a id="n19" xlink:href="element.html#Element">Element</a></text><line y1="78.0" x1="0.0" y2="78.0" x2="114.4" style="stroke:dimgrey;stroke-width:1" id="n20"></line><text x="6.0" y="92.0" fill="black" class="diagram-class-detail"><a id="n21" xlink:href="extensibility.html"><title id="n22">Extensions - as described for all elements: additional information that is not part of the basic definition of the resource / type</title>extension</a> : <a id="n23" xlink:href="extensibility.html">Extension</a> 0..*</text></g><g id="n24"><rect filter="url(#shadow1b)" rx="4" ry="4" x="140.0" width="149.60000000000002" y="0.0" style="fill:#ecffec;stroke:black;stroke-width:1" id="n25" height="92.0"></rect><line y1="28.0" x1="140.0" y2="28.0" x2="289.6" style="stroke:dimgrey;stroke-width:1" id="n26"></line><text x="214.8" y="20.0" id="n27" fill="black" class="diagram-class-title"><a id="n28" xlink:href="references.html#Reference">Reference</a></text><text x="146.0" y="42.0" id="n29" fill="black" class="diagram-class-detail"><a id="n30" xlink:href="references-definitions.html#Reference.reference"><title>A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources</title>reference</a> : <a id="n31" xlink:href="#string">string</a> [0..1]</text><text x="146.0" y="56.0" id="n35" fill="black" class="diagram-class-detail"><a id="n36" xlink:href="references-definitions.html#Reference.type"><title>The expected type of the target of the reference. If both Reference.type and Reference.reference are populated and Reference.reference is a FHIR URL, both SHALL be consistent.

The type is the Canonical URL of Resource Definition that is the type this reference refers to. References are URLs that are relative to http://hl7.org/fhir/StructureDefinition/ e.g. "Patient" is a reference to http://hl7.org/fhir/StructureDefinition/Patient. Absolute URLs are only allowed for logical models (and can only be used in references in logical models, not resources)</title>type</a> : <a id="n37" xlink:href="#uri">uri</a> [0..1] « <a id="n38" xlink:href="valueset-resource-types.html"><title id="n39">Aa resource (or, for logical models, the URI of the logical model). (Strength=Extensible)</title>ResourceType</a>+ »</text><text x="146.0" y="70.0" id="n45" fill="black" class="diagram-class-detail"><a id="n46" xlink:href="references-definitions.html#Reference.identifier"><title>An identifier for the target resource. This is used when there is no way to reference the other resource directly, either because the entity it represents is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location. There is no requirement that a Reference.identifier point to something that is actually exposed as a FHIR instance, but it SHALL point to a business concept that would be expected to be exposed as a FHIR instance, and that instance would need to be of a FHIR resource type allowed by the reference</title>identifier</a> : <a id="n47" xlink:href="#Identifier">Identifier</a> [0..1]</text><text x="146.0" y="84.0" id="n51" fill="black" class="diagram-class-detail"><a id="n52" xlink:href="references-definitions.html#Reference.display"><title>Plain text narrative that identifies the resource in addition to the resource reference</title>display</a> : <a id="n53" xlink:href="#string">string</a> [0..1]</text></g><line y1="63.20050761421319" x1="114.4" y2="58.81472081218273" x2="140.0" style="stroke:navy;stroke-width:1" id="n57"></line><polygon transform="rotate(-9.721524048481587 114.4 63.20050761421319)" style="fill:white;stroke:navy;stroke-width:1" id="n58" points="114.4,63.20050761421319 122.4,69.2005076142132 122.4,57.20050761421319 114.4,63.20050761421319"></polygon></svg>
   </div>
  </div>

  <div id="xmla">
   <a name="xml-Reference"> </a>
   <p><b>XML Template</b></p>
   <div id="xml-inner">
     <pre class="spec">
&lt;<a href="references-definitions.html#Reference" title="A reference from one resource to another." class="dict"><b>[name]</b></a> xmlns="http://hl7.org/fhir"&gt;
 &lt;!-- from Element: <a href="extensibility.html">extension</a> --&gt;
 &lt;<a href="references-definitions.html#Reference.reference" title="A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources." class="dict"><b>reference</b></a> value="[<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>]"/&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown" title="ref-1: SHALL have a contained resource if a local reference is provided"><b><img src="lock.png" alt="??"/> 0..1</b></span> <span style="color: navy"><a style="color: navy" href="terminologies.html#unbound">Literal reference, Relative, internal or absolute URL</a></span><span style="color: Gray"> --&gt;</span>
 &lt;<a href="references-definitions.html#Reference.type" title="The expected type of the target of the reference. If both Reference.type and Reference.reference are populated and Reference.reference is a FHIR URL, both SHALL be consistent.

The type is the Canonical URL of Resource Definition that is the type this reference refers to. References are URLs that are relative to http://hl7.org/fhir/StructureDefinition/ e.g. &quot;Patient&quot; is a reference to http://hl7.org/fhir/StructureDefinition/Patient. Absolute URLs are only allowed for logical models (and can only be used in references in logical models, not resources)." class="dict"><b>type</b></a> value="[<span style="color: darkgreen"><a href="datatypes.html#uri">uri</a></span>]"/&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>0..1</b></span> <span style="color: navy"><a style="color: navy" href="valueset-resource-types.html">Type the reference refers to (e.g. "Patient")</a></span><span style="color: Gray"> --&gt;</span>
 &lt;<a href="references-definitions.html#Reference.identifier" title="An identifier for the target resource. This is used when there is no way to reference the other resource directly, either because the entity it represents is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location. There is no requirement that a Reference.identifier point to something that is actually exposed as a FHIR instance, but it SHALL point to a business concept that would be expected to be exposed as a FHIR instance, and that instance would need to be of a FHIR resource type allowed by the reference." class="dict"><b>identifier</b></a>&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>0..1</b></span> <span style="color: darkgreen"><a href="datatypes.html#Identifier">Identifier</a></span> <span style="color: navy"><a style="color: navy" href="terminologies.html#unbound">Logical reference, when literal reference is not known</a></span><span style="color: Gray"> --&gt;</span>&lt;/identifier&gt;
 &lt;<a href="references-definitions.html#Reference.display" title="Plain text narrative that identifies the resource in addition to the resource reference." class="dict"><b>display</b></a> value="[<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>]"/&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>0..1</b></span> <span style="color: navy"><a style="color: navy" href="terminologies.html#unbound">Text alternative for the resource</a></span><span style="color: Gray"> --&gt;</span>
&lt;/[name]&gt;
</pre>


   </div>
  </div>

  <div id="jsona">
   <a name="json-Reference"> </a>
   <p><b>JSON Template</b></p>
   <div id="json-inner">
     <pre class="spec">
{<span style="float: right"><a href="json.html" title="Documentation for this format"><img src="help.png" alt="doco"/></a></span>
  // from Element: <a href="extensibility.html">extension</a>
  "<a href="references-definitions.html#Reference.reference" title="A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources." class="dict">reference</a>" : "&lt;<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>&gt;", <span style="color: Gray">//</span> <span style="color: brown" title="ref-1: SHALL have a contained resource if a local reference is provided"><b>C?</b></span> <span style="color: navy; opacity: 0.8"><a style="color: navy; opacity: 0.8" href="terminologies.html#unbound">Literal reference, Relative, internal or absolute URL</a></span>
  "<a href="references-definitions.html#Reference.type" title="The expected type of the target of the reference. If both Reference.type and Reference.reference are populated and Reference.reference is a FHIR URL, both SHALL be consistent.

The type is the Canonical URL of Resource Definition that is the type this reference refers to. References are URLs that are relative to http://hl7.org/fhir/StructureDefinition/ e.g. &quot;Patient&quot; is a reference to http://hl7.org/fhir/StructureDefinition/Patient. Absolute URLs are only allowed for logical models (and can only be used in references in logical models, not resources)." class="dict">type</a>" : "&lt;<span style="color: darkgreen"><a href="datatypes.html#uri">uri</a></span>&gt;", <span style="color: Gray">//</span> <span style="color: navy; opacity: 0.8"><a style="color: navy; opacity: 0.8" href="valueset-resource-types.html">Type the reference refers to (e.g. "Patient")</a></span>
  "<a href="references-definitions.html#Reference.identifier" title="An identifier for the target resource. This is used when there is no way to reference the other resource directly, either because the entity it represents is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location. There is no requirement that a Reference.identifier point to something that is actually exposed as a FHIR instance, but it SHALL point to a business concept that would be expected to be exposed as a FHIR instance, and that instance would need to be of a FHIR resource type allowed by the reference." class="dict">identifier</a>" : { <span style="color: darkgreen"><a href="datatypes.html#Identifier">Identifier</a></span> }, <span style="color: Gray">//</span> <span style="color: navy; opacity: 0.8"><a style="color: navy; opacity: 0.8" href="terminologies.html#unbound">Logical reference, when literal reference is not known</a></span>
  "<a href="references-definitions.html#Reference.display" title="Plain text narrative that identifies the resource in addition to the resource reference." class="dict">display</a>" : "&lt;<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>&gt;" <span style="color: Gray">//</span> <span style="color: navy; opacity: 0.8"><a style="color: navy; opacity: 0.8" href="terminologies.html#unbound">Text alternative for the resource</a></span>
}
</pre>


   </div>
  </div>
  <div id="ttla">
   <a name="ttl-Reference"> </a>
   <p><b>Turtle Template</b></p>
   <div id="ttl-inner">
     <pre class="spec">
@prefix fhir: &lt;http://hl7.org/fhir/&gt; .

[
 # from Element: <a href="extensibility.html">Element.extension</a>
  fhir:<a href="references-definitions.html#Reference.reference" title="A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources." class="dict">Reference.reference</a><a name="ttl-reference"> </a>[ <a href="datatypes.html#string">string</a> ]; # 0..1 <span style="color: navy">Literal reference, Relative, internal or absolute URL</span>
  fhir:<a href="references-definitions.html#Reference.type" title="The expected type of the target of the reference. If both Reference.type and Reference.reference are populated and Reference.reference is a FHIR URL, both SHALL be consistent.

The type is the Canonical URL of Resource Definition that is the type this reference refers to. References are URLs that are relative to http://hl7.org/fhir/StructureDefinition/ e.g. &quot;Patient&quot; is a reference to http://hl7.org/fhir/StructureDefinition/Patient. Absolute URLs are only allowed for logical models (and can only be used in references in logical models, not resources)." class="dict">Reference.type</a><a name="ttl-type"> </a>[ <a href="datatypes.html#uri">uri</a> ]; # 0..1 <span style="color: navy">Type the reference refers to (e.g. "Patient")</span>
  fhir:<a href="references-definitions.html#Reference.identifier" title="An identifier for the target resource. This is used when there is no way to reference the other resource directly, either because the entity it represents is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location. There is no requirement that a Reference.identifier point to something that is actually exposed as a FHIR instance, but it SHALL point to a business concept that would be expected to be exposed as a FHIR instance, and that instance would need to be of a FHIR resource type allowed by the reference." class="dict">Reference.identifier</a><a name="ttl-identifier"> </a>[ <a href="datatypes.html#Identifier">Identifier</a> ]; # 0..1 <span style="color: navy">Logical reference, when literal reference is not known</span>
  fhir:<a href="references-definitions.html#Reference.display" title="Plain text narrative that identifies the resource in addition to the resource reference." class="dict">Reference.display</a><a name="ttl-display"> </a>[ <a href="datatypes.html#string">string</a> ]; # 0..1 <span style="color: navy">Text alternative for the resource</span>
]
</pre>


   </div>
  </div>
  <div id="diffa">
   <a name="diff-Reference"> </a>
   <p><b>Changes since Release 3</b></p>
   <div id="diff-inner">
     <table class="grid">
  <tr class="diff-item">
    <td class="diff-left">
      <a href="references.html#Reference">Reference</a>
    </td>
    <td class="diff-right"></td>
  </tr>
  <tr class="diff-new">
    <td class="diff-left">Reference.type</td>
    <td class="diff-right">
      <ul>
        <li>Added Element</li>
      </ul>
    </td>
  </tr>
</table>

<p>See the <a href="diff.html">Full Difference</a> for further information</p>

   </div>
  </div>
 </div>
</div>


<p>&nbsp;</p>


<div class="use">
<p><b>Constraints</b></p>
<p>
At least one of <code>reference</code>, <code>identifier</code> and <code>display</code> SHALL be present (unless an extension is provided).
</p>
<p>
<a name="Reference-inv"> </a><table class="grid"><tr><td width="60"><b>id</b></td><td><b>Level</b></td><td><b>Location</b></td><td><b>Description</b></td><td><b><a href="fhirpath.html">Expression</a></b></td></tr><tr><td><b title="Formal Invariant Identifier">ref-1</b></td><td><a style="color: Maroon" href="conformance-rules.html#rule">Rule</a> </td><td>(base)</td><td>SHALL have a contained resource if a local reference is provided</td><td><span style="font-family: Courier New, monospace">reference.startsWith('#').not() or (reference.substring(1).trace('url') in %resource.contained.id.trace('ids'))</span></td></tr></table>
</p>
</div>

<a name="type"></a>
<h3 class="self-link-parent"><span class="sectioncount">2.3.0.1</span> Target Type <a href="references.html#type" title="link to here" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>

<p>
In resources, a <code>Reference</code> always point to another resource, which has 
a fixed and known type. If appropriate, this type can be specified in the reference
itself. In principle, the type of the target reference can be determined by resolving 
the reference (using the approaches described below), and examining the content 
returned to determine the type; for this reason, specifying the type is almost always 
duplication of information. However, resolving references may be a very slow 
operation, or impossible in practice due to various practical concerns. For this 
reason, the reference may indicate directly the target resource type:
</p>
<pre class="json">
 "subject": {
   "reference" : "http://someserver/some-path",
   "type" : "Patient"
 }
</pre>
<p>
When the type is provided directly, it SHALL agree with the type determined by resolving
the resource.
</p>
<p>
Note that in practice, it is often not necessary to know the type of the target resource is,
unless it's going to be resolved anyway, so in many cases, specifying the type of the 
target resource is unnecessary.
</p>
<p>
In order to support <a href="structuredefinition.html#logical">Logical Models</a>, 
the <code>type</code> element has the type of "uri". Whenever <code>type</code> 
appears in resources, the uri is represented relative to the base URI 
<code>http://hl7.org/fhir/StructureDefinition/</code>. For resources, then, the 
value is simply a code that is the type of resource - e.g. "Patient".
</p>

<a name="literal"></a>
<h3 class="self-link-parent"><span class="sectioncount">2.3.0.2</span> Literal References <a href="references.html#literal" title="link to here" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>

<p>
The <code>reference</code> is the key element - resources are identified and addressed by their URL. It
contains a URL that is either
</p>
<ul>
  <li>an absolute URL</li>
  <li>a relative URL, which is relative to the <a href="http.html#root">Service Base URL</a>, or, if processing a resource from a bundle, 
      which is relative to the base URL implied by the <code>Bundle.entry.fullUrl</code> (see <a href="bundle.html#references">Resolving References in Bundles</a>)</li>
  <li>an internal fragment reference (see "Contained Resources" below)</li>
</ul>
<p>
Notes:
</p>
<ul>
 <a name="regex"></a>
 <li>Using absolute URLs provides a stable, scalable approach suitable for a cloud/web context, while using relative/logical references provides a
   flexible approach suitable for use when trading across closed ecosystem boundaries. (see <a href="managing.html">"Managing Resource Identity"</a> for further discussion)</li>
 <li>Absolute URLs do not need to point to a <a href="http.html">FHIR RESTful server</a>, though this is the preferred approach.
   Whether or not the reference is to a FHIR RESTful server, the reference SHALL point to a Resource as defined by this specification.
   <br/>Note that This regex is true if the reference to a resource is consistent with a FHIR API:
   <pre>
   ((http|https):\/\/([A-Za-z0-9\-\\\.\:\%\$]*\/)+)?(Account|ActivityDefinition|AdverseEvent|AllergyIntolerance|Appointment|AppointmentResponse|AuditEvent|Basic|Binary|BiologicallyDerivedProduct|BodyStructure|Bundle|CapabilityStatement|CarePlan|CareTeam|CatalogEntry|ChargeItem|ChargeItemDefinition|Claim|ClaimResponse|ClinicalImpression|CodeSystem|Communication|CommunicationRequest|CompartmentDefinition|Composition|ConceptMap|Condition|Consent|Contract|Coverage|CoverageEligibilityRequest|CoverageEligibilityResponse|DetectedIssue|Device|DeviceDefinition|DeviceMetric|DeviceRequest|DeviceUseStatement|DiagnosticReport|DocumentManifest|DocumentReference|EffectEvidenceSynthesis|Encounter|Endpoint|EnrollmentRequest|EnrollmentResponse|EpisodeOfCare|EventDefinition|Evidence|EvidenceVariable|ExampleScenario|ExplanationOfBenefit|FamilyMemberHistory|Flag|Goal|GraphDefinition|Group|GuidanceResponse|HealthcareService|ImagingStudy|Immunization|ImmunizationEvaluation|ImmunizationRecommendation|ImplementationGuide|InsurancePlan|Invoice|Library|Linkage|List|Location|Measure|MeasureReport|Media|Medication|MedicationAdministration|MedicationDispense|MedicationKnowledge|MedicationRequest|MedicationStatement|MedicinalProduct|MedicinalProductAuthorization|MedicinalProductContraindication|MedicinalProductIndication|MedicinalProductIngredient|MedicinalProductInteraction|MedicinalProductManufactured|MedicinalProductPackaged|MedicinalProductPharmaceutical|MedicinalProductUndesirableEffect|MessageDefinition|MessageHeader|MolecularSequence|NamingSystem|NutritionOrder|Observation|ObservationDefinition|OperationDefinition|OperationOutcome|Organization|OrganizationAffiliation|Patient|PaymentNotice|PaymentReconciliation|Person|PlanDefinition|Practitioner|PractitionerRole|Procedure|Provenance|Questionnaire|QuestionnaireResponse|RelatedPerson|RequestGroup|ResearchDefinition|ResearchElementDefinition|ResearchStudy|ResearchSubject|RiskAssessment|RiskEvidenceSynthesis|Schedule|SearchParameter|ServiceRequest|Slot|Specimen|SpecimenDefinition|StructureDefinition|StructureMap|Subscription|Substance|SubstanceNucleicAcid|SubstancePolymer|SubstanceProtein|SubstanceReferenceInformation|SubstanceSourceMaterial|SubstanceSpecification|SupplyDelivery|SupplyRequest|Task|TerminologyCapabilities|TestReport|TestScript|ValueSet|VerificationResult|VisionPrescription)\/[A-Za-z0-9\-\.]{1,64}(\/_history\/[A-Za-z0-9\-\.]{1,64})?
   </pre>
   <br/>
   However, conformance with this regex is no guarantee that the end-point is a FHIR server
   </li>
 <li>URLs are always considered to be case-sensitive</li>
 <li>The URL may contain a reference to a canonical URL (see below) and applications can use the canonical URL resolution methods they support when resolving references, though the <code>|[version]</code> syntax part of the canonical reference is not supported</li>
 <li>References SHALL be a reference to an actual FHIR resource, and SHALL be resolvable (given that access control works, there is no temporary unavailability, etc.). Resolution can be either by retrieval from the URL, or, where applicable by resource type, by treating an absolute reference as a canonical URL (<a href="#canonical">see below</a>) and looking it up in a local registry/repository</li>
</ul>
<div class="example">
<p>A relative reference to the <a href="patient.html">Patient</a> "034AB16" in an element named <code>subject</code> on a FHIR RESTful server:</p>
<pre fragment="Reference" class="xml">
  &lt;subject&gt;
    &lt;reference value="Patient/034AB16" /&gt;
  &lt;/subject&gt;
</pre>
<p>An absolute reference to a <a href="structuredefinition.html">Structure Definition</a> in an element named <code>profile</code>:</p>
<pre class="json">
{
  "profile" : {
    "reference" : "http://fhir.hl7.org/svc/StructureDefinition/c8973a22-2b5b-4e76-9c66-00639c99e61b"
  }
}
</pre>
</div>

<p>
Note that in a bundle during a <a href="http.html#transaction">transaction</a>, reference URLs may actually contain 
logical URIs (e.g. OIDs or UUIDSs) that resolve within the transaction. When processing the transaction, the server 
replaces the logical URL with what is the correct literal URL at the completion of the transaction.
</p>

<p>
<a name="versions"></a>References can be version specific - that is, a reference may point to a specific version of a resource. e.g.:
</p>
<pre fragment="Reference" class="xml">
  &lt;target&gt;
    &lt;reference value="http://example.org/fhir/Observation/1x2/_history/2" /&gt;
  &lt;/target&gt;
</pre>
<p>
This is usually associated with audit trail or provenance information where it is important to 
reference a specific version of a record, not the most current information. 
</p>

<a name="logical"></a>
<h3 class="self-link-parent"><span class="sectioncount">2.3.0.3</span> Logical References <a href="references.html#logical" title="link to here" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>

<p>
In many contexts where FHIR is used, applications building a resource may know an identifier for the target
of the reference, but there is no way for the application to convert this to a literal reference that
directly references an actual resource. This situation may arise for several reasons:
</p>
<ul>
 <li>There is no server exposing any such resource. This is often the case with national identifiers (e.g. US SSN or NPI), and such identifiers are widely used</li>
 <li>The server that exposes the resource is not available to the source application, so it has no way to resolve an identifier to a reference</li>
 <li>The application is not in a RESTful environment - it is creating a message or a document</li>
</ul>
<p>
For further discussion of the use of identifiers on resources, see <a href="managing.html#consistency">Consistent Resource Identification</a>.
In these cases, the source application may provide the identifier as a logical reference to the
entity that the target resource would describe.
</p>

<div class="example">
<p>A logical reference to the <a href="patient.html">Patient</a> with an SSN of 000111111:</p>
<pre fragment="Reference" class="xml">
  &lt;patient&gt;
    &lt;identifier&gt;
      &lt;system value="http://hl7.org/fhir/sid/us-ssn" /&gt;
      &lt;value value="000111111" /&gt;
    &lt;/identifier&gt;
  &lt;/patient&gt;
</pre>
</div>

<p>
There is no requirement that a Reference.identifier point to something that is actually exposed or 
exists as a FHIR instance (except, of course, that the reference will need to be resolved to a 
target resource if any information from it is required in a FHIR context).
The reference SHALL point to a business concept that would be expected to be exposed as a
FHIR instance, and that instance would need to be of a FHIR resource type allowed by the reference
For example, it would not be legitimate to send the identifier for a drug prescription if 
the type were Reference(Observation|DiagnosticReport).  One of the use-cases for 
<code>Reference.identifier</code> is the situation where no FHIR representation exists 
(where the type is Reference (Any).
</p>
<p>
When processing a resource, an application
may be able to use the identifier directly, on the grounds that all it needs is the identifier,
or it may be able to resolve the identifier directly. Alternatively, it may be able to use
a server to resolve the logical reference to a literal reference to a resource.
</p>
<p>
Irrespective of how the resolution occurs, any system processing a logical reference will only be
able to resolve the identifier to a reference if it understands the business context in which the
identifier is used. Sometimes this is global (e.g. a national identifier) but often it is not.
</p>
<p>
For this reason, none of the useful mechanisms described for working with references (e.g.
<a href="search.html#chaining">chaining</a>, <a href="search.html#include">includes</a>) are
possible, nor should servers be expected to be able to automatically resolve the reference.
Servers may accept an identifier based reference untouched, resolve it, and/or reject it - see
<a href="capabilitystatement-definitions.html#CapabilityStatement.rest.resource.referencePolicy">CapabilityStatement.rest.resource.referencePolicy</a>.
</p>
<p>
When both logical and literal references are provided, the literal reference is preferred.
Applications processing the resource are allowed - but not required - to check that the identifier
matches the literal reference, if they understand how to resolve the logical reference.
</p>
<p>
Applications converting a logical reference to a literal reference may choose to leave the
logical reference present; or may remove it.
</p>

<a name="display"></a>
<h3 class="self-link-parent"><span class="sectioncount">2.3.0.4</span> Reference Description <a href="references.html#display" title="link to here" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>

<p>
Irrespective of whether a literal and/or logical reference is provided, or neither, the
<code>display</code> element may be used to provide a very short description of the
target resource.
</p>
<div class="example">
<pre fragment="Reference" class="xml">
  &lt;custodian&gt;
    &lt;reference value="Organization/123" /&gt;
    &lt;display value="HL7, Inc" /&gt;
  &lt;/custodian&gt;
</pre>
<p>
This text can be used by any application that cannot resolve the reference
to fill out the text portion of a hyperlink referring to the target resource, for instance.
It can also save time fetching a target resource and determining how to convert it to
a very short textual description.
</p>
</div>
<p>
In general, the <code>display</code>, if populated, does not have identical content
to the Resource.text of the referenced resource.  The purpose is to identify what's
being referenced, not to more fully describe it.
</p>

<a name="canonical"></a>
<h3 class="self-link-parent"><span class="sectioncount">2.3.0.5</span> Canonical URLs <a href="references.html#canonical" title="link to here" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>
<p>
Many resource types have a defined element "url" which is the canonical URL that always identifies the
resource across all contexts of use. Typically, <a href="terminology-module.html">terminology</a>, 
<a href="conformance-module.html">conformance</a> or <a href="clinicalreasoning-module.html">knowledge</a> 
resources have canonical URLs. The canonical URL <b>is the preferred way to reference a resource instance</b> 
for the resource types on which it is defined. See <a href="resource.html#canonical">Canonical Resource 
Identity</a> for further information.
</p>
<p>
References to canonical URLs use the <a href="datatypes.html#canonical"><code>canonical</code></a> type to refer to 
the <code>url</code> element on the conformance/knowledge resources (which has the type <a href="datatypes.html#uri">uri</a>):
</p>
<pre>
&lt;valueSet value="http://hl7.org/fhir/ValueSet/my-valueset"/&gt;
</pre>
<p>
References of type <code>canonical</code> may include a version, in order be precise about which version of the 
resource is being referred to. To do this, append the version to the reference with a '|' like this:
</p>
<pre>
&lt;valueSet value="http://hl7.org/fhir/ValueSet/my-valueset|0.8"/&gt;
</pre>
<p>
This is a version specific reference to a value set. Note that this refers to the <code>ValueSet.version</code>
not the <code>ValueSet.meta.versionId</code>. Searching for this on a FHIR server would look like this:
</p>
<pre>
GET fhir/ValueSet?url=http://hl7.org/fhir/ValueSet/my-valueset&amp;version=0.8
</pre>
<p>
Note that if a References to a canonical URL does not have a version, and the server finds multiple
versions for the value set, the system using the reference should pick the latest version
of the target resource and use that. Servers SHOULD support version specific searching for canonical
URLs by automatically detecting the presence of a |[version] and performing the appropriate
search. Additional notes about searching on versioned references to canonical URLs:
</p>
<ul>
 <li>Search only regards the latest version for each different logical id</li>
 <li>If there is no match (either because .version is empty or is different), the instance will not be matched, and will not appear in the result bundle</li>
 <li>This search only works for specific data elements of type of uri that act as canonical URL's (see list below)</li>
</ul>
<p>
Systems resolving references to canonical URLs SHOULD first try to resolve the reference using 
the canonical reference (e.g. search on a known registry of terminology, conformance, or knowledge
resources as appropriate), and then fall back to direct resolution using the URL as 
a literal reference if a local version of the canonical resource cannot be found. 
This approach is safe because the approaches must refer to the same 
artifact, though implementations will need to make appropriate arrangements regarding 
the version and/or currency of their local copy of the artifact.
</p>
<a name="canonical-list"> </a>
<p>
The following resources have canonical URLs and are allowed to be the target of a references to a canonical URLs:
</p>
<ul style="column-count: 3">
<li><a href="activitydefinition.html">ActivityDefinition</a></li>
<li><a href="capabilitystatement.html">CapabilityStatement</a></li>
<li><a href="chargeitemdefinition.html">ChargeItemDefinition</a></li>
<li><a href="codesystem.html">CodeSystem</a></li>
<li><a href="compartmentdefinition.html">CompartmentDefinition</a></li>
<li><a href="conceptmap.html">ConceptMap</a></li>
<li><a href="effectevidencesynthesis.html">EffectEvidenceSynthesis</a></li>
<li><a href="eventdefinition.html">EventDefinition</a></li>
<li><a href="evidence.html">Evidence</a></li>
<li><a href="evidencevariable.html">EvidenceVariable</a></li>
<li><a href="examplescenario.html">ExampleScenario</a></li>
<li><a href="graphdefinition.html">GraphDefinition</a></li>
<li><a href="implementationguide.html">ImplementationGuide</a></li>
<li><a href="library.html">Library</a></li>
<li><a href="measure.html">Measure</a></li>
<li><a href="messagedefinition.html">MessageDefinition</a></li>
<li><a href="namingsystem.html">NamingSystem</a></li>
<li><a href="operationdefinition.html">OperationDefinition</a></li>
<li><a href="plandefinition.html">PlanDefinition</a></li>
<li><a href="questionnaire.html">Questionnaire</a></li>
<li><a href="researchdefinition.html">ResearchDefinition</a></li>
<li><a href="researchelementdefinition.html">ResearchElementDefinition</a></li>
<li><a href="riskevidencesynthesis.html">RiskEvidenceSynthesis</a></li>
<li><a href="searchparameter.html">SearchParameter</a></li>
<li><a href="structuredefinition.html">StructureDefinition</a></li>
<li><a href="structuremap.html">StructureMap</a></li>
<li><a href="terminologycapabilities.html">TerminologyCapabilities</a></li>
<li><a href="testscript.html">TestScript</a></li>
<li><a href="valueset.html">ValueSet</a></li>
</ul>

<p>
A few elements that have references to canonical URLs have a <a href="elementdefinition-definitions.html#ElementDefinition.type.targetProfile">targetProfile</a> of <code>http://hl7.org/fhir/StructureDefinition/Resource</code>,
which is shown as canonical(Any) in this specification. Such references SHALL only reference one of these types of resources.
</p>

<a name="canonical-fragments"></a>
<h3 class="self-link-parent"><span class="sectioncount">2.3.0.6</span> Canonical Reference and Fragments <a href="references.html#canonical-fragments" title="link to here" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>
<p>
Canonical references may include a fragment when the reference is to a contained resource.
When the target of a canonical reference is a contained resource, the 
canonical reference will have a fragment as part of the URL:
</p>
<pre>
 &nbsp;&lt;valueSet value="http://fhir.acme.com/Questionnaire/example|1.0#vs1"/&gt;
</pre>
<p>
This is a reference to the value set with id "vs1" in version 1.0 of the identified questionnaire. 
The common case for this is internal references:
</p>
<pre>
 &nbsp;&lt;answerValueSet value="#vs1"/&gt;
</pre>
<p>
Which is the form for references to the contained value set inside the above example questionnaire.
</p>

<a name="rendering"></a>
<h3 class="self-link-parent"><span class="sectioncount">2.3.0.7</span> Rendering References in Resource Narratives <a href="references.html#rendering" title="link to here" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>
<p>
References between resources create a challenge when rendering resource
narratives: the narrative includes information from the target resources. As an example,
consider an Observation with a patient reference:
</p>
<div class="json">
<pre>
{
  "resourceType" : "Observation",
  "subject" : {
    "reference" : "Patient/example"
  }
}
</pre>
</div>
<p>
When represented in XHTML, this reference will generally become something like:
</p>
<div class="xhtml">
<pre>
  ...
&nbsp;&nbsp;&lt;p&gt;Patient: &lt;a href="Patient/example"&gt;Peter James CHALMERS (12345)&lt;/a&gt;&lt;/p&gt;  ...
</pre>
</div>
<p>
This implies that the system generating the resource narrative will need
to resolve the reference and generate a summary, or that the reference will
contain the information (generated by an application that is able to resolve 
the reference):
</p>
<div class="json">
<pre>
{
  "resourceType" : "Observation",
  "subject" : {
    "reference" : "Patient/example",
    "display" : "Peter James CHALMERS (12345)"
  }
}
</pre>
</div>
<p>
Narrative that contains information derived from other resources like this
is still regarded as 'generated' (for <a href="narrative-definitions.html#Narrative.status">Narrative.status</a>).
</p>
<p>
It's not mandatory to generate narrative this way. Narrative may 
be generated like this:
</p>
<div class="xhtml">
<pre>
  ...
&nbsp;&nbsp;&lt;p&gt;Patient: &lt;a href="Patient/example"&gt;(link)&lt;/a&gt;&lt;/p&gt;  ...
</pre>
</div>
<p>
However, users generally prefer a more informative narrative, so this 
is not always acceptable. 
</p>
<p>
Applications (and networks of applications) will need some kind of 
systematic approach for resolving references and/or maintaining the 
currency of narratives as the resources they reference are changed. 
The exact details of this are out of scope for the FHIR standard. 
</p>
<p>
Applications are encouraged to use the <code>Reference.display</code> element
to store a user presentable representation of the resource for when the 
resource cannot be resolved (e.g. due to network errors). The <code>canonical</code>
type does not have a display element because applications are generally expected 
to carry cached copies of the resources that are the target of the canonical 
references. If this functionality is still needed or desired anyway, the 
<a href="extension-rendered-value.html">Rendered Value extension</a> can be 
used.
</p>

 

<a name="contained"></a>
<h3 class="self-link-parent"><span class="sectioncount">2.3.0.8</span> Contained Resources <a href="references.html#contained" title="link to here" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>
<p>
In some circumstances, the content referred to in the resource reference does not have an independent
existence apart from the resource that contains it - it cannot be identified independently, and nor
can it have its own independent transaction scope. Typically, such circumstances arise where resources
are being assembled by a secondary user of the source data, such as a middleware engine. If the data available
when the resource is constructed does not include record keys or absolute identification information, then
a properly identified resource cannot be assembled, and even if an arbitrary identification was associated
with it, the resource could never be the subject of a transaction outside the context of the resource that
refers to it.
</p>
<p>
For example, consider a situation where an interface engine is creating a <a href="condition.html">Condition</a>
record on a patient from an <a href="http://www.hl7.org/implement/standards/product_brief.cfm?product_id=185">HL7 v2 <img src="external.png" style="text-align: baseline"/></a> message, and the only information about the primary surgeon is her
first name and last name (REL-7.2 &amp; REL-7.3). In the absence of a controlled practitioner directory,
this is not enough information to create an identified <a href="practitioner.html">Practitioner</a>
resource since more than one practitioner might have the same name.
</p>
<p>
In these circumstances, the resource is placed directly in-line in the resource. <b>This SHOULD NOT be
done when the content can be identified properly, as once the identification is lost, it is extremely difficult
(and context dependent) to restore it again.</b> The FHIR version of a contained resource SHALL always be the
same as the resource that contains it.
</p>
<div class="example">
<p>
An example of a contained resource:
</p>
<pre fragment="Condition" class="xml">
 &lt;Condition xmlns="http://hl7.org/fhir"&gt;
  &lt;contained&gt;
    &lt;Practitioner&gt;
      &lt;id value="p1"/&gt;
      &lt;name&gt;
        &lt;family value="Person"/&gt;
        &lt;given value="Patricia"/&gt;
      &lt;/name&gt;
    &lt;/Practitioner&gt;
  &lt;/contained&gt;
  &lt;!-- other attributes --&gt;
  &lt;asserter&gt;
    &lt;reference value="#p1" /&gt;
  &lt;/asserter&gt;
  &lt;!-- other attributes --&gt;
 &lt;/Condition&gt;
</pre>
<p>
The same example in JSON:
</p>
<pre fragment="Condition" class="json">
{
  "resourceType" : "Condition",
  "contained": [
    {
      "resourceType" : "Practitioner",
      "id" : "p1",
      "name" : [{
        "family" : "Person",
        "given" : ["Patricia"]
      }]
	  }],
   "asserter" : {
     "reference" : "#p1"
  }
}
</pre>
</div>
<blockquote><p> <b>Implementation Note:</b> 
Contained resources are still a reference rather than being inlined directly
into the element that is the reference (e.g. "custodian" above) to ensure that a
single approach to resolving resource references can be used. Though direct containment
would seem simpler, it would still be necessary to support internal references where the
same contained resource is referenced more than once. In the end, all that it would achieve
is creating additional options in the syntax. For users using XPath to process the resource,
the following XPath fragment resolves the internal reference:
</p>
<pre>
ancestor::f:*[not(parent::f:*)]/f:contained/*[@id=substring-after(<b>current()</b>/f:reference/@value, '#')]
</pre>
</blockquote>

<p>
Some notes about use and interpretation of contained resources:
</p>

<ul>
  <li>The <code>contained</code> element SHALL NOT have extensions on it (though contained resources can still contain extensions).</li>
  <li>The contained resource can be put in any resource that inherits from DomainResource. The contained element is then located at the
  beginning of the resource after any text narrative and before any extension.</li>
  <li>Contained resources share the same internal id resolution space as the parent resource (for id attributes, see <a href="narrative.html#internal">Narrative references</a>).</li>
  <li>When resolving references, references are resolved by looking through the 'container' resource - the one that contains the other
  resources. Since there are no nested contained resources, there is only one container resource.</li>
  <li>References to contained resources are never resolved outside the container resource. Specifically, resolution stops at the elements
  Bundle.entry.resource and Parameters.parameter.resource, but not at DomainResource.contained.</li>
  <li>Both <code>Reference</code> and <code>canonical</code> types may refer to contained resources</li>
  <li>Contained resources SHALL NOT contain additional contained resources.</li>
  <li>Contained resources SHALL NOT contain <code>meta.versionId</code>, <code>meta.lastUpdated</code>, or <code>meta.security</code>.</li>
  <li>Contained resources MAY contain <code>meta.tag</code>, though there are many tags that do not make sense on contained resources.</li>
  <li>A contained resource SHALL only be included in a resource if something in that resource (potentially another contained resource) has a reference to it.</li>
</ul>

<p>
Like other resources, contained resources can contain narrative. However, when rendering the containing resource, 
the narrative of the contained resources is ignored, so relevant information about contained resources SHALL
appear in the narrative of the containing resource. 
</p>
	
<p>
Resources that are contained inline do not "inherit" context from their parent resource. For instance, if
the parent resource contains a "subject", and the contained resource also has a "subject" element defined,
there is no implication that the contained resource has the same subject as the parent resource.
</p>

<p>
Resources can only be contained in other resources if there is a reference from the resource to
the contained resource, or if the contained resource references the container resource. 
This is intended to ensure that the meaning of the contained resource is clear, and that 
there is no confusion as to its significance.
</p>

<p>
For a resource that references the container, the reference is "#", like this:
</p>
<pre class="xml">
&lt;Patient xmlns="http://hl7.org/fhir"&gt;
  &lt;id value="something"/&gt;
  &lt;contained&gt;
    &lt;Provenance&gt;
      &lt;!-- no id necessary (though still allowed) --&gt;
      &lt;target&gt;
        &lt;reference value="#"/&gt;
      &lt;/target&gt;
    &lt;/Provenance&gt;
  &lt;/contained&gt;
  &lt;!-- other attributes --&gt;
&lt;/Patient&gt;
</pre>

<blockquote class="stu-note">
<a name="dstu2"></a>
<p>
There is no way to search for contained resources that reference their container. Is this a problem?
</p>
<p>
Feedback is welcome <a href="http://hl7.org/fhir-issues">here <img src="external.png" style="text-align: baseline"/></a>.
</p>
</blockquote>

  <!-- <a name="ids"></a>
<h3>Internal references using ids</h3>
<p>
Todo: document this.
</p> -->

<a name="circular"></a>
<h3 class="self-link-parent"><span class="sectioncount">2.3.0.9</span> Circular Resource References <a href="references.html#circular" title="link to here" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>
<p>
Some references are circular - that is, the reference points to another resource of the same type. 
There are several reasons why a resource may refer to other resources of the same type:
</p>
<ul>
 <li>part-of: the resources describe a complex hierarchy composed of parts e.g. an organization structure</li>
 <li>builds-on: resources may add additional content to another resource by deriving from it e.g. extending type declarations</li>
 <li>replaces: one resource may be replaced by another due to changes over time e.g. replacing a prescription or to support patient merging </li>
 <li>uses/re-uses: a resource may use another resource in a modular arrangement e.g. library references or value sets including other value sets</li>
</ul>
<p>
For parameters where the relationship is a strict hierarchy (i.e. where it would be wrong to have circular
references, even transitively), there is <a href="search.html#recursive">additional search support</a> for traversing the
hierarchy using :above and :below modifiers on the search parameters. 
</p>
<p>
Hierarchical references with search parameters (can have :above and :below modifiers on search parameters):
</p>
<ul style="-moz-column-count: 3; -moz-column-gap: 10px; -webkit-column-count: 3; -webkit-column-gap: 10px; column-count: 3; column-gap: 10px">
 <li><a href="careplan-definitions.html#CarePlan.basedOn">CarePlan.basedOn</a> (based-on)</li><li><a href="careplan-definitions.html#CarePlan.replaces">CarePlan.replaces</a> (replaces)</li><li><a href="careplan-definitions.html#CarePlan.partOf">CarePlan.partOf</a> (part-of)</li><li><a href="encounter-definitions.html#Encounter.partOf">Encounter.partOf</a> (part-of)</li><li><a href="location-definitions.html#Location.partOf">Location.partOf</a> (partof)</li><li><a href="organization-definitions.html#Organization.partOf">Organization.partOf</a> (partof)</li><li><a href="structuredefinition-definitions.html#StructureDefinition.baseDefinition">StructureDefinition.baseDefinition</a> (base)</li>
</ul>
<p>
References that may refer back to the source instance:
</p>
<ul style="-moz-column-count: 3; -moz-column-gap: 10px; -webkit-column-count: 3; -webkit-column-gap: 10px; column-count: 3; column-gap: 10px">
 <li><a href="patient-definitions.html#Patient.link.other">Patient.link.other</a> (link)</li>
</ul>
<p>
References for which the hierarchical behavior is not specified:
</p>
<ul style="-moz-column-count: 3; -moz-column-gap: 10px; -webkit-column-count: 3; -webkit-column-gap: 10px; column-count: 3; column-gap: 10px">
 <li><a href="account-definitions.html#Account.partOf">Account.partOf</a></li><li><a href="biologicallyderivedproduct-definitions.html#BiologicallyDerivedProduct.parent">BiologicallyDerivedProduct.parent</a></li><li><a href="capabilitystatement-definitions.html#CapabilityStatement.instantiates">CapabilityStatement.instantiates</a></li><li><a href="capabilitystatement-definitions.html#CapabilityStatement.imports">CapabilityStatement.imports</a></li><li><a href="careteam-definitions.html#CareTeam.participant.member">CareTeam.participant.member</a> (participant)</li><li><a href="catalogentry-definitions.html#CatalogEntry.relatedEntry.item">CatalogEntry.relatedEntry.item</a></li><li><a href="chargeitem-definitions.html#ChargeItem.partOf">ChargeItem.partOf</a></li><li><a href="chargeitemdefinition-definitions.html#ChargeItemDefinition.partOf">ChargeItemDefinition.partOf</a></li><li><a href="chargeitemdefinition-definitions.html#ChargeItemDefinition.replaces">ChargeItemDefinition.replaces</a></li><li><a href="claim-definitions.html#Claim.related.claim">Claim.related.claim</a></li><li><a href="claimresponse-definitions.html#ClaimResponse.insurance.claimResponse">ClaimResponse.insurance.claimResponse</a></li><li><a href="clinicalimpression-definitions.html#ClinicalImpression.previous">ClinicalImpression.previous</a> (previous)</li><li><a href="codesystem-definitions.html#CodeSystem.supplements">CodeSystem.supplements</a> (supplements)</li><li><a href="communication-definitions.html#Communication.inResponseTo">Communication.inResponseTo</a></li><li><a href="communicationrequest-definitions.html#CommunicationRequest.replaces">CommunicationRequest.replaces</a> (replaces)</li><li><a href="composition-definitions.html#Composition.relatesTo.target[x]">Composition.relatesTo.target[x]</a></li><li><a href="conceptmap-definitions.html#ConceptMap.group.unmapped.url">ConceptMap.group.unmapped.url</a> (other)</li><li><a href="consent-definitions.html#Consent.source[x]">Consent.source[x]</a> (source-reference)</li><li><a href="contract-definitions.html#Contract.instantiatesCanonical">Contract.instantiatesCanonical</a></li><li><a href="contract-definitions.html#Contract.legallyBinding[x]">Contract.legallyBinding[x]</a></li><li><a href="device-definitions.html#Device.parent">Device.parent</a></li><li><a href="devicedefinition-definitions.html#DeviceDefinition.parentDevice">DeviceDefinition.parentDevice</a> (parent)</li><li><a href="documentreference-definitions.html#DocumentReference.relatesTo.target">DocumentReference.relatesTo.target</a> (relatesto)</li><li><a href="examplescenario-definitions.html#ExampleScenario.workflow">ExampleScenario.workflow</a></li><li><a href="group-definitions.html#Group.member.entity">Group.member.entity</a> (member)</li><li><a href="implementationguide-definitions.html#ImplementationGuide.dependsOn.uri">ImplementationGuide.dependsOn.uri</a> (depends-on)</li><li><a href="medication-definitions.html#Medication.ingredient.item[x]">Medication.ingredient.item[x]</a></li><li><a href="medicationadministration-definitions.html#MedicationAdministration.partOf">MedicationAdministration.partOf</a></li><li><a href="medicationknowledge-definitions.html#MedicationKnowledge.relatedMedicationKnowledge.reference">MedicationKnowledge.relatedMedicationKnowledge.reference</a></li><li><a href="medicationrequest-definitions.html#MedicationRequest.basedOn">MedicationRequest.basedOn</a></li><li><a href="medicationrequest-definitions.html#MedicationRequest.priorPrescription">MedicationRequest.priorPrescription</a></li><li><a href="medicationstatement-definitions.html#MedicationStatement.partOf">MedicationStatement.partOf</a> (part-of)</li><li><a href="messagedefinition-definitions.html#MessageDefinition.replaces">MessageDefinition.replaces</a></li><li><a href="messagedefinition-definitions.html#MessageDefinition.base">MessageDefinition.base</a></li><li><a href="messagedefinition-definitions.html#MessageDefinition.allowedResponse.message">MessageDefinition.allowedResponse.message</a></li><li><a href="molecularsequence-definitions.html#MolecularSequence.referenceSeq.referenceSeqPointer">MolecularSequence.referenceSeq.referenceSeqPointer</a></li><li><a href="molecularsequence-definitions.html#MolecularSequence.pointer">MolecularSequence.pointer</a></li><li><a href="observation-definitions.html#Observation.hasMember">Observation.hasMember</a> (has-member)</li><li><a href="observation-definitions.html#Observation.derivedFrom">Observation.derivedFrom</a> (derived-from)</li><li><a href="operationdefinition-definitions.html#OperationDefinition.base">OperationDefinition.base</a> (base)</li><li><a href="person-definitions.html#Person.link.target">Person.link.target</a> (link,patient,practitioner,relatedperson)</li><li><a href="plandefinition-definitions.html#PlanDefinition.action.definition[x]">PlanDefinition.action.definition[x]</a> (definition)</li><li><a href="procedure-definitions.html#Procedure.partOf">Procedure.partOf</a> (part-of)</li><li><a href="procedure-definitions.html#Procedure.reasonReference">Procedure.reasonReference</a> (reason-reference)</li><li><a href="questionnaire-definitions.html#Questionnaire.derivedFrom">Questionnaire.derivedFrom</a></li><li><a href="researchstudy-definitions.html#ResearchStudy.partOf">ResearchStudy.partOf</a> (partof)</li><li><a href="searchparameter-definitions.html#SearchParameter.derivedFrom">SearchParameter.derivedFrom</a> (derived-from)</li><li><a href="searchparameter-definitions.html#SearchParameter.component.definition">SearchParameter.component.definition</a> (component)</li><li><a href="servicerequest-definitions.html#ServiceRequest.basedOn">ServiceRequest.basedOn</a> (based-on)</li><li><a href="servicerequest-definitions.html#ServiceRequest.replaces">ServiceRequest.replaces</a> (replaces)</li><li><a href="specimen-definitions.html#Specimen.parent">Specimen.parent</a> (parent)</li><li><a href="structuremap-definitions.html#StructureMap.import">StructureMap.import</a></li><li><a href="substance-definitions.html#Substance.ingredient.substance[x]">Substance.ingredient.substance[x]</a></li><li><a href="substancespecification-definitions.html#SubstanceSpecification.property.definingSubstance[x]">SubstanceSpecification.property.definingSubstance[x]</a></li><li><a href="substancespecification-definitions.html#SubstanceSpecification.relationship.substance[x]">SubstanceSpecification.relationship.substance[x]</a></li><li><a href="supplydelivery-definitions.html#SupplyDelivery.partOf">SupplyDelivery.partOf</a></li><li><a href="task-definitions.html#Task.partOf">Task.partOf</a> (part-of)</li><li><a href="valueset-definitions.html#ValueSet.compose.include.valueSet">ValueSet.compose.include.valueSet</a></li>
</ul>

</div>


				</div>  <!-- /inner-wrapper -->
            </div>  <!-- /row -->
        </div>  <!-- /container -->
        
    </div>  <!-- /segment-content -->


        <div id="segment-footer" class="segment"></div>  <!-- /segment-footer -->
  <!-- disqus thread -->
  <!-- disqus -->
  <!-- end disqus -->        
	
	<div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
		<div class="container">  <!-- container -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-post-footer -->
    
      <!-- JS and analytics only. -->
      <!-- Bootstrap core JavaScript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
<script src="./assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
<script src="./dist/js/bootstrap.min.js"> </script>
<script src="./assets/js/respond.min.js"> </script>

<script src="./assets/js/fhir.js"> </script>

  <!-- Analytics Below
================================================== -->


  <script src="external/jquery/jquery.js"> </script>
<script src="jquery-ui.min.js"> </script>
<script>
 try {
   var currentTabIndex = sessionStorage.getItem('fhir-resource-tab-index');
 } catch(exception){
 }
 if (!currentTabIndex)
   currentTabIndex = '0';

$( '#tabs-Reference' ).tabs({ active: currentTabIndex, activate: function( event, ui ) { store(ui.newTab.index()); } });


function store(currentTab) {
  document.activeElement.blur();
  try {
    sessionStorage.setItem('fhir-resource-tab-index', currentTab);
  } catch(exception){
  }
  $( '#tabs-Reference' ).tabs('option', 'active', currentTab);
}
</script>
        <script src="./assets/js/template-web.js"></script>
        <script src="./assets/js/nav.js"></script>
        <script>
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?351f802705b09ff497ed83d498777ee1";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>

</body>
</html>