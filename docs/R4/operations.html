<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <title>操作 - FHIR v4.0.0</title>

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="author" content="http://hl7.org/fhir"/>

  <link rel="stylesheet" href="fhir.css"/>
  <link rel="Prev" href="http://hl7.org/fhir/operations.html"/>

    <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="./dist/css/bootstrap.css"/>
  <link rel="stylesheet" href="./assets/css/bootstrap-fhir.css"/>

    <!-- Project extras -->
  <link rel="stylesheet" href="./assets/css/project.css"/>
  <link rel="stylesheet" href="./assets/css/pygments-manni.css"/>
	<link rel="stylesheet" href="jquery-ui.css"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- [if lt IE 9]>
  <script src="./assets/js/html5shiv.js"></script>
  <script src="./assets/js/respond.min.js"></script>
  <![endif] -->

    <!-- Favicons -->
  <link sizes="144x144" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-144-precomposed.png"/>
  <link sizes="114x114" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-114-precomposed.png"/>
  <link sizes="72x72" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-72-precomposed.png"/>
  <link rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-57-precomposed.png"/>
  <link rel="shortcut icon" href="./assets/ico/favicon.png"/>

</head>
<body>
	    <div id="segment-header" class="segment"></div>  <!-- /segment-header -->	


	<div id="segment-navbar" class="segment">  <!-- segment-navbar -->
		<div id="stripe"> </div>
		<div class="container">  <!-- container -->
   <!-- HEADER CONTENT -->
 	      		 	      		      		
			<nav class="navbar navbar-inverse">
				<div class="container">
					<button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
					</button>
					<a href="index.html" class="navbar-brand hidden">FHIR</a>
					
    <div class="nav-collapse collapse navbar-inverse-collapse"  id="nav-content"></div>  <!-- /.nav-collapse -->
				</div>  <!-- /.container -->
			</nav>  <!-- /.navbar -->
      		
  <!-- /HEADER CONTENT -->				
		</div>  <!-- /container -->
	</div>  <!-- /segment-navbar -->
	

	<div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
		<div class="container">  <!-- container -->	
			<ul class="breadcrumb">
        <li><img src="exchange.png"/> <b> 当前位置：</b><a href="exchange-module.html">交换</a></li>
        <li>操作</li>        <!-- operations.html / page / -->

			</ul>	
		</div>  <!-- /container -->
	</div>  <!-- /segment-breadcrumb -->
	

	<div id="segment-content" class="segment">  <!-- segment-content -->
	<div class="container">  <!-- container -->
            <div class="row">
            	<div class="inner-wrapper">
  <!-- CONTENT CONTENT -->


<div class="col-12">

<a name="base"></a>
<h2 class="self-link-parent"><span class="sectioncount">3.2.0<a name="3.2.0"> </a></span> RESTful API 的扩展操作 <a href="operations.html#3.2.0" title="此处链接地址" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h2>
<table class="colsn"><tr><td id="wg">工作组: <a href="http://www.hl7.org/Special/committees/fiwg/index.cfm" _target="blank">FHIR Infrastructure <img src="external.png" style="text-align: baseline"/></a></td><td id="fmm"><a href="versions.html#maturity">成熟度</a>: Normative</td><td id="ballot"><a href="versions.html#std-process">标准状态</a>:  <!-- !ns! --><a href="versions.html#std-process">Normative</a></td></tr></table>


<p>
<a href="http.html">RESTful API</a>定义了一组通用的交互动作（读取，更新，搜索等）可以操作储存库中已知类型的资源。
这些交互遵循RESTful范式，通过对一组已定义资源的<b>C</b>reate/<b>R</b>ead/<b>U</b>pdate/<b>D</b>elete 动作来管理状态。
虽然这种方法解决了许多用例，但是使用类似RPC的范式可以使用输入和输出（<b>E</b>xecute）执行命令操作来更有效地满足某些功能。
 </p>
<p>
在以下情况适合于用“操作”：
</p>
<ul>
 <li>
 服务器需要在制定响应内容方面发挥积极作用，而不仅仅是返回现有信息

 </li>
 <li>
     预期目的是引起副作用（side effects），例如修改现有资源或创建新资源，或者超出RESTful接口范围的其他更改（例如合并患者记录）
 </li>
 <li>
 该任务涉及跨多个不同资源和/或强制执行的业务规则
 </li>
 <li>任务涉及以协同的方式更新多个资源（注意：这也可以通过<a href="http.html#transaction">事务</a>来完成，但单个操作可以更专注于任务。）
 </li>
</ul>
<p> 
该规范描述了一个轻量级的操作框架，可以无缝扩展RESTful API。
该框架涵盖了如何执行本页涉及的操作以及如何 <a href="operationdefinition.html">定义操作</a>。
</p>
<p>
操作具有以下通用属性：
</p>
<ul>
 <li>每个操作都有一个名称
</li>
 <li>每个操作都有一个参数列表，包含了输入输出的参数</li>
 <li>参数可以是资源、数据类型或搜索参数</li>
 <li>
    和对RESTful API的要求一样，操作受安全约束</li>
 <li>
 操作终结点的URI基于现有的RESTful API地址方案</li>
 <li>
 操作可以使用存储库中所有类型的资源</li>
 <li>可以对具体资源、资源类型或在整个系统层面执行操作</li>
</ul>

<a name="executing"></a>
<h3 class="self-link-parent"><span class="sectioncount">3.2.0.1</span> 执行操作 <a href="operations.html#executing" title="此处链接地址" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>

<p>
    用从FHIR终结点派生的URL来执行操作，在操作的名称之前以“美元符号”（“$”字符）为前缀。例如：
   
</p>
<pre>
 POST http://fhir.someserver.org/fhir/Patient/1/$everything
</pre>
<p>
    当一个操作的affectsState=false，并且参数都是不带扩展名的基本数据类型（如上例所示）时，也可以使用“GET”动作来调用。
（注意：也可以使用HEAD头来请求-参见<a href="http.html#head">HEAD头的支持</a>）。
   
</p>
<p>
    可以在三类FHIR终结点上使用“操作”：
</p>
<ul>
    <li>
        FHIR服务基地址上的终结点(如：http://fhir.someserver.org/fhir):
        这些操作是可以作用于整个服务器的范围。例如，“返回此服务器上所有的已知扩展”
       </li>
    <li>
        某种资源类型(如：http://fhir.someserver.org/fhir/Patient):
        这些操作可以作用于指定资源类型的所有实例
   
    </li>
    <li>
        某个资源实例(如：http://fhir.someserver.org/fhir/Patient/1):
        这些操作仅针对某个单独的资源实例，如上面的$everything操作
           </li>
  <!-- see task GF#
 <li>A specific version of a resource instance (http://fhir.someserver.org/fhir/Patient/1/_history/4): These operations involve only a specific version of a single instance of a FHIR Resource and exists only to allow manipulation of profile and tag metadata of past versions</li> -->
</ul>
<p>

    请求的body消息体包含一个<a href="parameters.html">参数资源(Parameters)</a>的特殊基础资源，
    参数资源是一个用<key，value>键值对来表示一个命名参数的集合，其中的value值可以是所有的基本元数据类型或复杂数据类型，甚至是完整的资源。它还可以包括搜索参数类型格式的字符串。
</p>
<p>
    请求完成后，该操作返回另一个<a href="parameters.html">
        参数资源(Parameters)
    </a>，其中包含一个或多个输出参数。这意味着FHIR操作可以接收一组零到多个<i>
        输入
    </i>参数，并返回一组零到多个<i>输出</i>参数。POST的body消息体和返回的结果通常都是一个资源。
   </p>
<p>
    当<b>同时</b>满足下列条件时，可以使用<code>GET</code>动作并以HTTP URL参数作为入参来调用操作：
  
</p>
<ol>
    <li>
        只有简单的输入参数，即没有像'identifier'或'reference'这样复杂的数据类型
       
    </li>
    <li>此操作不会<a href="operationdefinition-definitions.html#OperationDefinition.affectsState">
        影响服务器的状态</a></li>
</ol>
<p>
    如果只返回了一个名为“return”的输出参数，那么响应的<b>可能</b>是一个不带<a href="parameters.html">
        参数资源(Parameters)
    </a>的返回值。此类用法将在后面进一步讨论。
  
</p>
<p>
    如果返回的是一个<a href="bundle.html">资源捆束(Bundle)</a>，其<a href="bundle-definitions.html#Bundle.type">
        Bundle.type
    </a>应该是“<a href="codesystem-bundle-type.html#bundle-type-collection">
        collection
    </a>”，除非它具有<a href="http.html#search">
        搜索语义
    </a>，例如匹配的资源计数和<a href="http.html#paging">
        页面链接（“下一页”等）
    </a>。
</p>


<a name="executing"></a>
<h4 class="self-link-parent"><span class="sectioncount">3.2.0.1.1</span> 不带参数的操作 <a href="operations.html#executing" title="此处链接地址" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h4>
<p>
    执行操作时不带任何参数是一种特例。对于不会导致任何状态更改的操作，可以直接调用：
   </p>
<pre class="http">
GET [base]/Composition/example/$document
</pre>
<p>
    如果调用的操作会引起状态变更，则必须用POST来调用。当不传参数资源时，POST的body消息体留空即可:
</p>
<pre class="http">
POST [base]/Claim/example/$submit
Content-Length: 0


</pre>


<a name="defined"></a>
<h3 class="self-link-parent"><span class="sectioncount">3.2.0.2</span> FHIR 已定义的操作 <a href="operations.html#defined" title="此处链接地址" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>
<p>
请参见 <a href="operationslist.html">已定义的操作清单</a>.
</p>

<a name="extensibility"></a>
<h3 class="self-link-parent"><span class="sectioncount">3.2.0.3</span> 自定义操作 <a href="operations.html#extensibility" title="此处链接地址" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>
<p>
    除了本规范定义的操作之外，实现者可自定义操作。
    不同实现者定义的操作名称冲突问题，可以使用服务器的<a href="capabilitystatement.html">能力声明</a>来解决。
    
</p>
<p>
    此外，如果寻址方案不与本规范发生冲突，这些操作的定义或附加的运行时操作的定义并不会对那些不依赖RESTful API、没有与RESTful API集成的其他类型的操作造成影响。

</p>

<a name="defining"></a>
<h3 class="self-link-parent"><span class="sectioncount">3.2.0.4</span> Defining an Operation <a href="operations.html#defining" title="此处链接地址" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>

<p>
Each Operation is defined by:
</p>
<ul>
 <li>A context for the Operation - <i>system</i>, <i>resource type</i>, or <i>resource instance</i></li>
 <li>A name for the Operation</li>
 <li>A list of parameters along with their definitions</li>
</ul>

<p>
For each parameter, the following information is needed:
</p>
<ul>
 <li>Name - the name of the parameter. For implementer convenience, the name should be a valid token in common implementation languages</li>
 <li>Use - In | Out | Both</li>
 <li>Type - a data type or a Resource type</li>
 <li>Search Type - for string search parameters, what kind of search parameter they are (and what kind of modifiers they have)</li>
 <li>Profile - a <a href="structuredefinition.html">StructureDefinition</a>  that describes additional restrictions about the parameter - only used if the parameter type is a resource or data type</li>
 <li>Documentation - a description of the parameter's use</li>
 <li>(Optional) Search Type - if the type is a string, and the parameter is being used like a search parameter, which kind of search type applies</li>
</ul>
<p>
Parameters may be nested into multi-part parameters. Each part has the same information as a parameter, except for use, which is taken from
the parameter it is part of.
</p>

<p>
The resource <a href="operationdefinition.html">Operation Definition</a> is used to provide a computable definition
of the Operation.
</p>

<a name="extending"></a>
<h3 class="self-link-parent"><span class="sectioncount">3.2.0.5</span> Extending an Operation <a href="operations.html#extending" title="此处链接地址" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>
<p>
Implementations are able to extend an operation by defining new named parameters.
Implementations can publish their own extended definitions using the
 <a href="operationdefinition.html">Operation Definition</a> resource, and
this variant definition can use OperationDefinition.base to refer to the
underlying definition.
</p>
<p>
Note that the FHIR specification will never define any parameter names starting with "x-".
</p>

<a name="executing"></a>
<a name="synchronous"></a>

<h3 class="self-link-parent"><span class="sectioncount">3.2.0.6</span> Executing an Operation Synchronously <a href="operations.html#synchronous" title="此处链接地址" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>

<p>
Operations are typically executed synchronously: a client sends a request
to a server that includes the operation's <i>in</i> parameters and the server replies with the
operation's <i>out</i> parameters.
</p>

<p>
The URL for an operation end-point depends on its context:
</p>
<ul>
 <li>system: the URL is [base]/$[name]</li>
 <li>resource type: the URL is [base]/[type]/$[name]</li>
 <li>resource instance: the URL is [base]/[type]/[id]/$[name]</li>
</ul>

<a name="request"></a>
<h4 class="self-link-parent"><span class="sectioncount">3.2.0.6.1</span> Operation Request <a href="operations.html#request" title="此处链接地址" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h4>

<p>
An operation is generally invoked by performing an HTTP POST to the operation's end-point.
The submitted content is the special <a href="parameters.html">Parameters</a> format (the "in" parameters) - a list of named parameters.
For an example, see <a href="op-example-request.html">the value set expansion request example</a>.
Note that when parameters have a search type, the search modifiers are available and are used on the parameter name in the Parameters resource (e.g. "code:in").
</p>
<p>
Note that the same arrangement as for the RESTful interface applies
with respect to <a href="http.html#mime-type">content types</a>.
</p>
<p>
If all the parameters for the operation are <a href="datatypes.html#primitive">primitive types</a> and the operation
has <a href="operationdefinition-definitions.html#OperationDefinition.affectsState"><code>affectsState</code></a> = false, 
the operation may be invoked by performing an HTTP GET operation where all of the values of the parameters are appended 
to the URL in the search portion of the URL (e.g. after the '?' character). Servers SHALL support this method of invocation. 
E.g.
</p>
<pre>
GET [base]/ValueSet/$expand?url=http://hl7.org/fhir/ValueSet/body-site&amp;filter=abdo
</pre>
<p>
When using the HTTP GET operation, if there is a repeating parameter for the extended operation the values for that parameter
are repeated by repeating the named parameter. E.g. Observation $stats statistic parameter
</p>
<pre>
GET [base]/Observation/$stats?subject=Patient/123&amp;code=55284-4&amp;system=http://loinc.org&amp;duration=1&amp;statistic=average&amp;statistic=min&amp;statistic=max&amp;statistic=count
</pre>
<p>
If, when invoking the operation, there is exactly one input parameter of type Resource (irrespective of whether other possible parameters are defined),
that the operation can also be executed by a POST with that resource as the body of the request (and no parameters on the url).
</p>

<p>
Servers MAY choose to support submission of the parameters represented in <a href="https://www.ietf.org/rfc/rfc2388.txt">multi-part/form-data <img src="external.png" style="text-align: baseline"/></a> format as well,
which can be useful when testing an operation using HTML forms.
</p>

<a name="response"></a>

<h4 class="self-link-parent"><span class="sectioncount">3.2.0.6.2</span> Operation Response <a href="operations.html#response" title="此处链接地址" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h4>

<p>
If an operation succeeds, an HTTP Status success code is returned.
This will usually be a 2xx code, though it may also be a 303 See Other.
Other kinds of 3xx codes should be understood to indicate that the
operation did not proceed, and the client will need to re-issue the
operation if it can perform the redirection (e.g. may get redirected
to an authentication step). User agents should note that servers
may issue redirects, etc. to authenticate the client in response to
an operation request. An HTTP status code of 4xx or 5xx indicates
an error, and an <a href="operationoutcome.html">OperationOutcome</a>
SHOULD be returned with details.
</p>
<p>
In general, an operation response uses the same
<a href="parameters.html">Parameters</a> format whether there is only one or
there are multiple named <i>out</i> parameters.
</p>
<p>
If there is only one <i>out</i> parameter, which is a Resource with the parameter name
"return" then the parameter format is
not used, and the response is simply the resource itself.
</p>
<p>
The result of an operation is subject to <a href="http.html#mime-type">content negotiation like any other interaction</a>. 
Specifically, if the returned resource is a Binary, the response SHALL behave in the same manner as if a 'read' operation
had been performed on the resource.  I.e. The content will be returned as either a FHIR resourse with base64-encoded content 
or as a raw binary, depending on the Accept header specified when invoking the operation (see <a href="binary.html#rest">Serving Binary Resources using the RESTful API </a>).
</p>

<p>
The resources that are returned by the operation may be
retained and made available in the resource repository
on the operation server. In that case, the server will
provide the identity of the resource in the returned resources. When
resources that are not persisted are returned in the response,
they will have no <code>id</code> property.
</p>

<a name="asynchronous"></a>

<h3 class="self-link-parent"><span class="sectioncount">3.2.0.7</span> Executing an Operation Asynchronously <a href="operations.html#asynchronous" title="此处链接地址" class="self-link"><svg viewBox="0 0 1792 1792" width="20" class="self-link" height="20"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z" fill="navy"></path></svg></a></h3>

<p>
Use the <a href="async.html">standard RESTful API 
Asynchronous pattern</a> to execute operations asynchronously.
</p>


</div>


				</div>  <!-- /inner-wrapper -->
            </div>  <!-- /row -->
        </div>  <!-- /container -->
        
    </div>  <!-- /segment-content -->


        <div id="segment-footer" class="segment"></div>  <!-- /segment-footer -->
  <!-- disqus thread -->
  <!-- disqus -->
  <!-- end disqus -->        
	
	<div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
		<div class="container">  <!-- container -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-post-footer -->
    
      <!-- JS and analytics only. -->
      <!-- Bootstrap core JavaScript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
<script src="./assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
<script src="./dist/js/bootstrap.min.js"> </script>
<script src="./assets/js/respond.min.js"> </script>

<script src="./assets/js/fhir.js"> </script>

  <!-- Analytics Below
================================================== -->
        <script src="./assets/js/template-web.js"></script>
        <script src="./assets/js/nav.js"></script>
        <script>
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?351f802705b09ff497ed83d498777ee1";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>
</body>
</html>